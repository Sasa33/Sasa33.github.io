---
layout: page
---
<div id="post">
  <section class="post-header">
    <h1 class="title">{{ page.title }}</h1>
    <p class="subtitle">{{ page.subtitle }}</p>
    <p class="meta">
      {{ page.author }} {{ page.date | date: "%Y-%m-%d" }} <span id="{{ page.url }}" class="leancloud_visitors" data-flag-title="{{ page.title }}">
    阅读 <span class="leancloud-visitors-count"></span>
</span>
    </p>
  </section>
  <section class="post-content">
    {{ content }}
  </section>
</div>

<div id="top" class="top-btn" onclick="moveTop()">
  <i class="fas fa-chevron-up"></i>
</div>

<!-- Side Catalog Container -->
{% if page.catalog %}
<div class="
    col-lg-2 col-lg-offset-0
    visible-lg-block
    sidebar-container
    catalog-container">
    <div class="side-catalog">
        <hr class="hidden-sm hidden-xs">
        <h5>
            <a class="catalog-toggle" href="#">CATALOG</a>
        </h5>
        <ul class="catalog-body"></ul>
    </div>
</div>
{% endif %}

<!-- Disqus -->
{% if site.disqus_shortname %}
<div id="comments">
  <div class="border">
    {% include disqus.html %}
  </div>
</div>
{% endif %}

<!-- Valine -->
<div id="vcomments"></div>
<script>
  new Valine({
    el: '#vcomments',
    appId: 'YwCL3hjssk74RQMQqDNmRHrG-gzGzoHsz',
    appKey: 'uDFGroRWRvFOVCeIIjuJ12yL',
    placeholder: '看完了，让我来评论一下^_^',
    visitor: true
  })
</script>

<!-- Footer -->
{% include footer.html %}

<script>
  var lastScrollTop = 0;
  window.onscroll = function () {
    var st = document.body.scrollTop || document.documentElement.scrollTop;
    if (st > 250) {
      document.getElementById("top").style.display = "block"
      if (st > lastScrollTop) {
        document.getElementById("top").style.opacity = 0
      } else {
        document.getElementById("top").style.opacity = 1
      }
    } else {
      document.getElementById("top").style.opacity = 0
      if (st > lastScrollTop) {
        document.getElementById("top").style.display = "none"
      }
    }
    lastScrollTop = st <= 0 ? 0 : st;
  }
  function moveTop() {
    document.body.scrollTop = 0
    document.documentElement.scrollTop = 0
  }
</script>

<!-- Side Catalog -->
{% if page.catalog %}
<script type="text/javascript">
    function generateCatalog (selector) {
      const postContent = document.getElementsByClassName('post-content');
      const catalogBody = document.getElementsByClassName(selector);
      headings = postContent[0].querySelectorAll("h1, h2, h3, h4, h5, h6");
      headings.forEach(element => {
        let tagName = element.tagName;
        let id = element.getAttribute('id');
        let text = element.textContent;
        let nav = document.createElement('li');
        nav.className = `${tagName}-nav`;
        nav.innerHTML = `<a href='#${id}'>${text}</a>`
        catalogBody[0].appendChild(nav);
      });
      return true;
    }

    generateCatalog("catalog-body");

    // toggle side catalog
    const sideCatalog = document.getElementsByClassName('side-catalogside-catalog');
    const catalogToggle = document.getElementsByClassName('catalog-toggle');
    catalogToggle[0].addEventListener('click', () => {
      e.preventDefault();
      sideCatalog[0].classList.toggle('fold');
    })
</script>
{% endif %}